<div class="container-fluid">
  <div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Transactions</h1>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <div class="card shadow mb-4">
        <div class="card-header py-3 d-flex justify-content-between">
          <form class="w-100" method="get" action="/admin/transactions">
            <div class="form-row">
              <div class="form-group col-lg-2 col-md-4 col-sm-12">
                <label for="to_date">To Date</label>
                <input
                  class="form-control form-control-sm"
                  type="date"
                  id="to_date"
                  placeholder="To Date"
                  name="to_date"
                  value="<%= data?.searchData?.to_date || '' %>"
                />
              </div>
              <div class="form-group col-lg-2 col-md-4 col-sm-12">
                <label for="from_date">From Date</label>
                <input
                  class="form-control form-control-sm"
                  type="date"
                  id="from_date"
                  placeholder="From Date"
                  name="from_date"
                  value="<%= data?.searchData?.from_date || '' %>"
                />
              </div>
              <div class="form-group col-lg-3 col-md-4 col-sm-12">
                <label for="action_buttons" class="w-100">&nbsp;</label>
                <button type="submit" class="btn btn-sm btn-primary ml-md-4">
                  Submit
                </button>
              </div>
            </div>
          </form>
        </div>
        <div class="card-body pt-0">
          <table class="table table-sm table-hover table-responsive-sm">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">To</th>
                <th scope="col">For</th>
                <th scope="col">Amount</th>
                <th scope="col">Date</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
              <% if(data?.transactions){ %> <% let startPageNum =
              ((Number(data.currentPage)-1) * Number(data.perPage))+1 %> <%
              data.transactions.forEach((val,i)=>{ %>
              <tr>
                <th scope="row"><%= startPageNum++ %></th>
                <td><%= val.to_name %></td>
                <td><%= val.for_name %></td>
                <td>
                  <a
                    class="font-weight-bold"
                    data-toggle="tooltip"
                    data-placement="top"
                    title="<%= val.description %>"
                    ><%= val.amount.toLocaleString('hi-IN') %></a
                  >
                </td>
                <td><%= val.t_date %></td>
                <td>
                  <a
                    data-tID="<%= val.id %>"
                    data-subName="<%= val.for_name %>"
                    data-tDate="<%= val.transaction_date %>"
                    data-tAmount="<%= val.amount %>"
                    data-tDesc="<%= val.description %>"
                    class="updateAmountBtn"
                  >
                    <i class="fa fa-edit"></i>
                  </a>
                </td>
                <% }) %> <% } %>
              </tr>
            </tbody>
          </table>
          <% if (data.pages > 0) { %>
          <nav aria-label="Page navigation example">
            <ul class="pagination mt-2">
              <li class="page-item <%= data.currentPage == 1 && 'disabled' %>">
                <a
                  class="page-link"
                  href="/admin/transactions?page=<%= Number(data.currentPage)-1 %>"
                  aria-label="Previous"
                >
                  <span aria-hidden="true">&laquo;</span>
                  <span class="sr-only">Previous</span>
                </a>
              </li>
              <% let i = (Number(data.currentPage) > 5 ?
              Number(data.currentPage) - 4 : 1) %> <% if (i !== 1) { %>
              <li class="disabled"><a class="px-3">...</a></li>
              <% } %> <% for (; i <= (Number(data.currentPage) + 4) && i <=
              data.pages; i++) { %> <% if (i == data.currentPage) { %>
              <li class="page-item active">
                <a class="page-link"><%= i %></a>
              </li>
              <% } else { %>
              <li class="page-item">
                <a class="page-link" href="/admin/transactions?page=<%= i %>"
                  ><%= i %></a
                >
              </li>
              <% } %> <% if (i == Number(data.currentPage) + 4 && i <
              data.pages) { %>
              <li class="disabled"><a class="px-3">...</a></li>
              <% } %> <% } %>
              <li
                class="page-item <%= data.currentPage == data.pages && 'disabled' %>"
              >
                <a
                  class="page-link"
                  href="/admin/transactions?page=<%= Number(data.currentPage)+1 %>"
                  aria-label="Next"
                >
                  <span aria-hidden="true">&raquo;</span>
                  <span class="sr-only">Next</span>
                </a>
              </li>
            </ul>
          </nav>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</div>
